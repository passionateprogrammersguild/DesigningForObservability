<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Designing for Observability</title>

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/white.css">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="plugin/highlight/monokai.css">
	</head>
	<body>
		<div>
			<!-- Logo goes here-->
			<img src="img/logo.png" height="50" widtrh="50" alt="Suddath logo"/>
		</div>
		<div class="reveal">
			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h1>Designing for Observability </h1>
					<h3>An exercise with Microsoft Azure</h3>
					<aside class="notes">
						Welcome and thank you for attending this talk.  I am super-excited to share this material with you.  How many people are practicing monitoring, measureing system health and observability in their systems today?
	 				</aside>
				</section>

				<!--A Little about me -->				
				<section>
					<div>
						<img src="img/me.jpg">
					</div>

					<p>
						Hi, I'm Michael Mann. I am the Technical Lead for the Moving and Logistics Division at Suddath. Suddath is a Transportation and Logistics company that has been in business for over 100 years.
					</p>
				</section>

				<section data-markdown>
					<script type="text/template">
						![Alt text](img/organization.png "Organizational Structure")
					</script>
				</section>

				<section data-markdown>
					<script type="text/template">						
						## Suddath Technology Landscape
						- Cloud first partnered with [Microsoft Azure](https://portal.azure.com)
						- [Azure Devops](https://dev.azure.com/) for source control and CICD
						- Web Applications - [Angular Spa](https://angular.io/) w/API's in C#
						- Desktop Applications - [WinUI3](https://docs.microsoft.com/en-us/windows/apps/winui/winui3/) with [Realm](https://realm.io/) for local sync and API's in C#
						- Mobile Applications - [Xamarin Forms](https://docs.microsoft.com/en-us/xamarin/get-started/what-is-xamarin-forms) with [Realm](https://realm.io/) for local sync and API's in C# 						
					</script>
				</section>				
				
				<section data-markdown>
					<script type="text/template">						
						## What we will cover in this talk
						- Understand the terms Health, Monitoring and Observability
						- Review the Architecture of a sytem in the context of health, monitoring, and observability
						- Examine the tools available in the Azure ecosystem
						- Apply what we have learned to an existing system
					</script>
				</section>
				

				<section>
					<section data-background="img/birdwatching.jpg">
						<h2 style="color:white;">Definition of Terms</h2>
					</section>
					
					<section data-markdown>
						<script type="text/template">
							## System Health
														
							According the the [World Health Organization](https://www.who.int/about/governance/constitution), health is defined as a state of complete physical, mental and social well-being and not merely the absence of disease or infirmity.
						</script>
					</section>

					<section data-markdown>
						<script type="text/template">
							## Monitoring
														
							From the [Google SRE book](https://sre.google/sre-book/monitoring-distributed-systems/) monitoring is defined as collecting, processing, aggregating, and displaying real-time quantitative data about a system, such as query counts and types, error counts and types, processing times, and server lifetimes.
						</script>
					</section>

					<section data-markdown>
						<script type="text/template">
							## Observability
														
							According to [Honeycomb](https://docs.honeycomb.io/getting-started/learning-about-observability/) observability is about being able to ask arbitrary questions about your environment without having to know ahead of time what you wanted to ask.
						</script>
					</section>
				</section>					
				
				<section>
					
					<section data-markdown>
						<script type="text/template">
							## Let's look at a running system
						</script>
					</section>
					
					<section data-markdown>
						<script type="text/template">
							## Estimator
														
							[Estimator &#174;](https://suddath.com/news/suddath-wins-digital-edge-50-international-technology-award/) is an application primarilary used by Salespeople to estimate business moves.  The application is designed to be mobile first such that Salespeople can perform an estimate on-site.
						</script>
					</section>

					<section data-markdown>
						<script type="text/template">
							## High-level components
														
							- Desktop application
							- Web Application for managing rates
							- Web Application for managing  custom inventory
							- Web properties hosted in Microsoft Azure
							- Authentication / Authorization partner is Auth0
							- Documents stored in Azure Blob Storage
							- Hosted Sql Azure database
						</script>
					</section>

					<section data-markdown>
						<script type="text/template">
							#### Estimator Desktop Application
							![Alt text](img/estimator-architecture.png "Estimator Architecture")
						</script>
					</section>

					<section data-markdown>
						<script type="text/template">
							#### Estimator Rate Management Web Application
							![Alt text](img/estimator-ratemanagement.png "Estimator Rate Management Web Application Architecture")
						</script>						
					</section>

					<section data-markdown>
						<script type="text/template">
							#### Estimator Inventory Management Web Application
							![Alt text](img/estimator-inventorymanagement.png "Estimator Inventory Management Web Application Architecture")
						</script>						
					</section>					
				</section>

				<section>
					<section data-markdown>
						<script type="text/template">
							### [Health checks in ASP.NET Core](https://docs.microsoft.com/en-us/aspnet/core/host-and-deploy/health-checks?view=aspnetcore-6.0)

							- Health probes can be used by container orchestrators and load balancers to check an app's status.
							- Use of memory, disk, and other physical server resources can be monitored for healthy status.
							- Health checks can test an app's dependencies, such as databases and external service endpoints, to confirm availability and normal functioning.
						</script>
					</section>

					<section data-markdown>
						<script type="text/template">
							#### Exercise #1 - An outside in approach to health
							![Alt text](img/estimator-architecture.png "Estimator Architecture")
						</script>
					</section>

					<section data-markdown>
						<script type="text/template">							
							![Alt text](img/estimator-architecture-health.png "Estimator Architecture")
						</script>
					</section>

					<section data-markdown>
						<script type="text/template">
							#### Exercise #2 - An outside in approach to health
							![Alt text](img/estimator-ratemanagement.png "Estimator Rate Management Web Application Architecture")
						</script>
					</section>

					<section data-markdown>
						<script type="text/template">
							![Alt text](img/estimator-ratemanagement-health.png "Estimator Rate Management Web Application Architecture")
						</script>
					</section>

					<section data-markdown>
						<script type="text/template">
							#### Exercise #3 - An outside in approach to health
							![Alt text](img/estimator-inventorymanagement.png "Estimator Inventory Management Web Application Architecture")
						</script>
					</section>

					<section data-markdown>
						<script type="text/template">
							![Alt text](img/estimator-inventorymanagement-health.png "Estimator Inventory Management Web Application Architecture")
						</script>
					</section>

					<section data-markdown>
						<script type="text/template">
							## Tools to add [Helth Checks](https://docs.microsoft.com/en-us/aspnet/core/host-and-deploy/health-checks?view=aspnetcore-6.0) to an existing system
														
							- [Microsoft.Extensions.Diagnostics.HealthChecks](https://www.nuget.org/packages/Microsoft.Extensions.Diagnostics.HealthChecks)
							- [AspNetCore.HealthChecks.UI.Client](https://www.nuget.org/packages/AspNetCore.HealthChecks.UI.Client)
							- [AspNetCore.HealthChecks.SqlServer](https://www.nuget.org/packages/AspNetCore.HealthChecks.SqlServer)
							- [AspNetCore.HealthChecks.AzureStorage](https://www.nuget.org/packages/AspNetCore.HealthChecks.AzureStorage)
							- [Create your own HealthCheck](https://docs.microsoft.com/en-us/aspnet/core/host-and-deploy/health-checks?view=aspnetcore-6.0#create-health-checks)
						</script>
					</section>
				</section>

				<section>
					<section data-markdown>
						<script type="text/template">
							### [Monitoring in Azure with Application Insights](https://docs.microsoft.com/en-us/azure/azure-monitor/app/app-insights-overview)

							Application Insights helps development teams understand app performance and usage.
						</script>
					</section>
					<section data-markdown>
						<script type="text/template">
							### Application Insights Monitors

							- Request rates, response times, and failure rates
							- Dependency rates, response times, and failure rates
							- Exceptions
							- Diagnostic trace logs from apps
							- Custom events and metrics in client or server code that track business events
							- Performance counters from Windows or Linux server machines, such as CPU, memory, and network usage
						</script>
					</section>

					<section data-markdown>
						<script type="text/template">
							### [Application Insights SDK](https://docs.microsoft.com/en-us/azure/azure-monitor/app/asp-net-core)

							- TelemetryClient - Client for the App Insights SDK
							- TelemetryInitializer - Enriches telemetry with additional information
							- TelemetryProcessor - Enables the ability to discard un-nedded telemetry
						</script>
					</section>
				</section>

				<section>
					<section data-markdown>
						<script type="text/template">
							### [TelemetryClient API](https://docs.microsoft.com/en-us/azure/azure-monitor/app/api-custom-events-metrics)

							| Method | Used For |
							| ----------- | ----------- |
							| TrackPageView | Pages, screens, blades, or forms. |
							| TrackEvent | User actions and other events. Used to track user behavior or to monitor performance. | 
							| GetMetric | Zero and multidimensional metrics, centrally configured aggregation, C# only. | 							
						</script>
					</section>
					<section data-markdown>
						<script type="text/template">
							| Method | Used For |
							| ----------- | ----------- |
							| TrackMetric | Performance measurements such as queue lengths not related to specific events. | 
							| TrackException | Logging exceptions for diagnosis. Trace where they occur in relation to other events and examine stack traces. |
							| TrackRequest | Logging the frequency and duration of server requests for performance analysis. |							
						</script>
					</section>
					<section data-markdown>
						<script type="text/template">
							| Method | Used For |
							| ----------- | ----------- |
							| TrackTrace | Resource Diagnostic log messages. You can also capture third-party logs. |
							| TrackDependency | Logging the duration and frequency of calls to external components that your app depends on. |
						</script>
					</section>
				</section>
				
				<section>
					<section data-background-image="img/mobile-sync.png"
							 data-background-size="contain">
					</section>


					<section data-background-image="img/mobile-sync-telemetry.png" 
							data-background-size="contain">	
					</section>
				</section>

				<section>
					<section data-markdown>
						<script type="text/template">
							### Observability in Azure with [Alerts](https://docs.microsoft.com/en-us/azure/azure-monitor/alerts/alerts-overview) and [Kusto](https://docs.microsoft.com/en-us/azure/data-explorer/kusto/query/)
							
						</script>
					</section>					
				</section>

				
				<section>
					<h1>Thank you</h2>
					<div>							
						<span><a href="mailto:mmann2943@gmail.com">mmann2943@gmail.com</a></span>							
					</div>
				</section>					
			</div>
		</div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				hash: true,

				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
			});
		</script>
	</body>
</html>
